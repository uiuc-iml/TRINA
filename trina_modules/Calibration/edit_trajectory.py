from klampt.model.trajectory import SE3Trajectory,RobotTrajectory
from klampt.io import resource
from klampt.math import se3,vectorops
from klampt import WorldModel,vis

world_path = '../TRINA/Motion/data/TRINA_world_bubonic.xml'
world = WorldModel()
res = world.readFile(world_path)
robot = world.robot(0)

# traj = SE3Trajectory([0,1],[se3.identity(),se3.identity()])
# saved,result = resource.edit("se3 traj",traj,'SE3Trajectory','Some spatial trajectory',world=world,referenceObject=robot.link(20))

milestones = [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -4.022480789815084, 0.1441022592731933, 1.5810931364642542, -0.2540009778789063, 0.9090495109558105, 0.46262025833129883, 0.0, 0.0, 3.0305886268615723, -2.592729707757467, -1.2952775955200195, 3.5719353395649414, -1.0662596861468714, -3.2616871039019983, 0.0],
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -4.021248642598287, 0.24578778326000972, 1.0531767050372522, 0.3471519190021972, 0.9092416763305664, 0.46265602111816406, 0.0, 0.0, 3.0305752754211426, -2.592729707757467, -1.295241355895996, 3.5719477373310546, -1.0662596861468714, -3.2616871039019983, 0.0],
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -3.5838163534747522, 0.02525584279980464, 1.088980499898092, 0.33386818944897456, 0.9889183044433594, 0.344362735748291, 0.0, 0.0, 3.0305886268615723, -2.592693944970602, -1.2952289581298828, 3.5719353395649414, -1.0662596861468714, -3.2616756598102015, 0.0],
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -3.3187511602984827, -0.09262259424243169, 0.5738800207721155, -0.08404429376635747, 0.988893985748291, 0.34433889389038086, 0.0, 0.0, 3.82926607131958, -3.435350557366842, -1.3277654647827148, 3.412728472346924, -1.2728799025165003, -3.576373879109518, 0.0],
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -3.3187387625323694, -0.09259922922167974, 0.5738685766803187, -0.08404429376635747, 0.9889421463012695, 0.34433889389038086, 0.0, 0.0, 3.903341770172119, -3.408657213250631, -1.154709815979004, 2.9263273912617187, -1.08616811433901, -3.576362435017721, 0.0],
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -3.3187149206744593, -0.09262259424243169, 0.5738437811480921, -0.08404429376635747, 0.9889421463012695, 0.3443269729614258, 0.0, 0.0, 3.642861843109131, -3.2416612110533656, -1.2520208358764648, 2.926471396083496, -1.2735865751849573, -3.787663284932272, 0.0]]

times = vectorops.mul([0,1,2,3,4,5],20)
traj = RobotTrajectory(robot = robot,times = [0,2],milestones = [[0]*22]*2)#, times = times,milestones = milestones)
print(len(milestones[0]))
saved,result = resource.edit("robot traj",traj,'Trajectory','Some robot trajectory',world=world,referenceObject=robot)